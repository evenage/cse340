<% if (title) { %>
    <h1>
        <%= title %>
    </h1>
    <% } else { res.redirect('/') } %>

        <%# messages() %>
            <% if (errors) { %>
                <ul class="notice">
                    <% errors.forEach(error=> { %>
                        <li>
                            <%= error.msg %>
                        </li>
                        <% }) %>
                </ul>
                <% }%>


                    <!-- Add Vehicle Form -->
                    <form action="/inv/update" method="post" id="updateForm">
                        <fieldset>
                        <label for="classificationList">Classification:</label>
                        <%- classificationSelect %>

                            <label for="invMake">Make</label>
                            <input type="text" name="inv_make" id="invMake" required minlength="3"
                                placeholder="Min of 3 characters" <% if(locals.inv_make) { %> value="<%= locals.inv_make
                                %>" <% } %>>


                                    <label for="invModel">Model</label>
                                    <input type="text" name="inv_model" id="invModel" required minlength="3"
                                        placeholder="Min of 3 characters" <% if(locals.inv_model) { %> value="<%=
                                        locals.inv_model %>" <% } %>>


                                            <label for="invDescription">Description</label>
                                            <textarea id="invDescription" name="inv_description"
                                                required><% if(locals.inv_description) { %><%= locals.inv_description %><% } %></textarea>


                                            <label for="invImage">Image Path</label>
                                            <input type="text" name="inv_image" id="invImage" size="30" required <%
                                                if(locals.inv_image) { %> value="<%= locals.inv_image %>" <% } else { %>
                                                    value="/images/vehicles/no-image.png" <% } %>>


                                                        <label for="invThumbnail">Thumbnail Path</label>
                                                        <input type="text" name="inv_thumbnail" id="invThumbnail"
                                                            size="30" required <% if(locals.inv_image) { %> value="<%=
                                                            locals.inv_image %>" <% } else { %>
                                                                value="/images/vehicles/no-image-tn.png" <% } %>>


                                                                    <label for="invPrice">Price</label>
                                                                    <input type="text" name="inv_price" id="invPrice"
                                                                        size="10"
                                                                        placeholder="decimal or integer numbers only"
                                                                        required pattern="^[1-9]\d*(\.\d+)?$" <%
                                                                        if(locals.inv_price) { %> value="<%=
                                                                        locals.inv_price %>" <% } %>>


                                                                            <label for="invYear">Year</label>
                                                                            <input type="text" name="inv_year"
                                                                                id="invYear" size="10"
                                                                                placeholder="4-digit year" required
                                                                                minlength="4" maxlength="4"
                                                                                pattern="^(19|20)\d{2}$" <%
                                                                                if(locals.inv_year) { %> value="<%=
                                                                                locals.inv_year %>" <% } %>>


                                                                                    <label for="invMiles">Miles</label>
                                                                                    <input type="text" name="inv_miles"
                                                                                        id="invMiles" size="10"
                                                                                        placeholder="digits only"
                                                                                        required pattern="^\d+$" <%
                                                                                        if(locals.inv_miles) { %>
                                                                                    value="<%= locals.inv_miles %>" <% }
                                                                                            %>>


                                                                                            <label
                                                                                                for="invColor">Color</label>
                                                                                            <input type="text"
                                                                                                name="inv_color"
                                                                                                id="invColor" required
                                                                                                <% if(locals.inv_color)
                                                                                                { %> value="<%=
                                                                                                locals.inv_color %>" <%
                                                                                                    } %>>

                                                                                                <input type="hidden" name="inv_id"
                                                                                                <% if(locals.inv_id) {%> value="<%= locals.inv_id %>" <% } %>>


                                                                                                    <button disabled
                                                                                                        type="submit">Update Vehicle
                                                                                                        Vehicle</button>
                        </fieldset>
                    </form>

                    <!-- Client-side Validation Script -->
                    <script src="../../js/inv-update.js"></script>>
                       <script> document.getElementById('addVehicleForm').addEventListener('submit', function (event) {
                           let inputs = this.querySelectorAll('input[required]');
                            for (let input of inputs) {
                               if (!input.value.trim()) {
                                alert('All fields are required!');
                                event.preventDefault();
                         return;
                                }
                             }
                        });
                </script>